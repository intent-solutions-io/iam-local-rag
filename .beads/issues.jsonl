{"id":"local-rag-agent-0h0","title":"NEXUS Phases 2-4: Cloud Providers + Team Mode + Tests","description":"Complete NEXUS hybrid cloud implementation. Phase 2: Real Anthropic/OpenAI providers + router + PolicyRedactor. Phase 3: Run ledger (SQLite) + workspace endpoints. Phase 4: Comprehensive tests + CI. NO AAR. Hybrid safe mode enforced: docs local, only snippets to cloud.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:19:38.579054668-06:00","updated_at":"2025-12-22T22:19:38.579054668-06:00"}
{"id":"local-rag-agent-0h0.1","title":"Phase 2.1: Provider Router + PolicyRedactor","description":"Implement provider router (mode selection) and PolicyRedactor (enforce HYBRID_SAFE_MODE, truncate snippets, record hashes). Router selects LLM+Embed providers based on NEXUS_MODE/PROVIDER env vars. Acceptance: Router working, policy enforced centrally.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:07.928612508-06:00","updated_at":"2025-12-22T22:37:16.580638483-06:00","closed_at":"2025-12-22T22:37:16.580638483-06:00","close_reason":"Completed: PolicyRedactor + ProviderRouter implemented. Safety enforced centrally. Commit: 487b065","dependencies":[{"issue_id":"local-rag-agent-0h0.1","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:07.946137953-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.10","title":"Phase 4.4: UI Shim for app_optimized.py","description":"Add shim so app_optimized.py uses nexus.core.rag_pipeline for query/index. Keep existing UI stable. Acceptance: Optimized app works with new core.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.729960479-06:00","updated_at":"2025-12-22T22:20:08.729960479-06:00","dependencies":[{"issue_id":"local-rag-agent-0h0.10","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.731137691-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.2","title":"Phase 2.2: Anthropic Provider (Real)","description":"Implement real Anthropic provider using official SDK. Support ANTHROPIC_MODEL, retry/backoff for 429/5xx. MUST never receive full docs in hybrid mode. Acceptance: Can generate answers using Claude API.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.044610026-06:00","updated_at":"2025-12-22T22:40:30.705194078-06:00","closed_at":"2025-12-22T22:40:30.705194078-06:00","close_reason":"Implemented AnthropicLLMProvider with official SDK, system message extraction, and retry logic with exponential backoff","dependencies":[{"issue_id":"local-rag-agent-0h0.2","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.046163374-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.3","title":"Phase 2.3: OpenAI Provider (Real)","description":"Implement real OpenAI provider using official SDK. Support OPENAI_MODEL, retry/backoff. Same safety constraints. Acceptance: Can generate answers using GPT API.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.136903731-06:00","updated_at":"2025-12-22T22:40:31.555139875-06:00","closed_at":"2025-12-22T22:40:31.555139875-06:00","close_reason":"Implemented OpenAILLMProvider and OpenAIEmbeddingProvider with batch processing, retry logic, and proper error handling","dependencies":[{"issue_id":"local-rag-agent-0h0.3","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.137698127-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.4","title":"Phase 2.4: Vertex Provider (Stub or Real)","description":"Either implement working Vertex provider OR create clean stub with clear error message and wiring. Acceptance: Gracefully handles Vertex config.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.22250797-06:00","updated_at":"2025-12-22T22:42:05.060758936-06:00","closed_at":"2025-12-22T22:42:05.060758936-06:00","close_reason":"Implemented VertexLLMProvider and VertexEmbeddingProvider with Gemini 1.5 Pro support, textembedding-gecko, batch processing, and retry logic","dependencies":[{"issue_id":"local-rag-agent-0h0.4","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.223532972-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.5","title":"Phase 3.1: Run Ledger (SQLite)","description":"Implement SQLite run ledger: record_index_run, record_query_run, list_runs. Store run_id, timestamp, workspace_id, mode, providers, doc_hashes, excerpt_hashes, latency. Acceptance: All operations logged to DB.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.306022112-06:00","updated_at":"2025-12-22T22:44:17.19239275-06:00","closed_at":"2025-12-22T22:44:17.19239275-06:00","close_reason":"Implemented RunLedger with SQLite storage, integrated into RAGPipeline for automatic audit trail of index and query operations","dependencies":[{"issue_id":"local-rag-agent-0h0.5","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.307134266-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.6","title":"Phase 3.2: Workspace API Endpoints","description":"Add API endpoints: GET /workspaces, POST /workspaces, GET /runs, GET /runs/{id}. Ensure workspace isolation (separate Chroma collections). Acceptance: All endpoints functional.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.39136005-06:00","updated_at":"2025-12-22T22:45:38.839732186-06:00","closed_at":"2025-12-22T22:45:38.839732186-06:00","close_reason":"Implemented workspace API endpoints: GET/POST /workspaces, GET /runs, GET /runs/{id} with ledger integration for multi-workspace management","dependencies":[{"issue_id":"local-rag-agent-0h0.6","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.392443209-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.7","title":"Phase 4.1: Unit Tests","description":"Unit tests: provider router matrix, policy redaction (max length), hybrid safety (sentinel test). Acceptance: All unit tests passing.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.474286929-06:00","updated_at":"2025-12-22T22:45:40.428588886-06:00","dependencies":[{"issue_id":"local-rag-agent-0h0.7","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.475276158-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.8","title":"Phase 4.2: Integration + API Tests","description":"Integration tests: index fixtures, query with citations. API tests: TestClient for all endpoints. Acceptance: Tests pass with fixtures.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.564114102-06:00","updated_at":"2025-12-22T22:20:08.564114102-06:00","dependencies":[{"issue_id":"local-rag-agent-0h0.8","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.565136371-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-0h0.9","title":"Phase 4.3: CI Updates","description":"Update GitHub Actions: run pytest, compileall. Minimum: python -m compileall \u0026\u0026 pytest -q. Acceptance: CI green.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:08.648925948-06:00","updated_at":"2025-12-22T22:20:08.648925948-06:00","dependencies":[{"issue_id":"local-rag-agent-0h0.9","depends_on_id":"local-rag-agent-0h0","type":"parent-child","created_at":"2025-12-22T22:20:08.650059775-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-v2b","title":"NEXUS Hybrid Cloud Upgrade - Epic","description":"Transform NEXUS (local RAG) into HYBRID team-mode knowledge service supporting local Ollama OR cloud LLMs (Claude/OpenAI/Vertex). Keep local-only support. Add workspaces, API, tests. HARD CONSTRAINT: Docs stay local; cloud receives only retrieved snippets+hashes. Acceptance: All phases complete, AAR written, tests passing.","notes":"Phases 0-1: COMPLETE. Phases 2-4: Framework ready. Documentation: COMPLETE. All core architecture in place. Cloud providers and full testing remain for future phases.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:07:56.732836314-06:00","updated_at":"2025-12-22T22:17:37.314989714-06:00"}
{"id":"local-rag-agent-v2b.1","title":"Phase 0: Baseline + Bugfix","description":"1) Run app to confirm current state 2) Fix app.py indentation bug (lines 148-154) 3) Decide entrypoint strategy 4) Add smoke test for Streamlit entry. Acceptance: Bug fixed, smoke test passes, app runs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:08:21.493614077-06:00","updated_at":"2025-12-22T22:10:53.442469249-06:00","closed_at":"2025-12-22T22:10:53.442469249-06:00","close_reason":"Completed: indentation bug fixed, smoke tests added, requirements.txt created, .env.example added, gitignore updated. Commit: 696f716","dependencies":[{"issue_id":"local-rag-agent-v2b.1","depends_on_id":"local-rag-agent-v2b","type":"parent-child","created_at":"2025-12-22T22:08:21.503580147-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-v2b.2","title":"Phase 1: Extract Core Pipeline","description":"Create nexus/ package: core/{rag_pipeline,ingest,index,retrieve,synthesize,policy,providers/}, api/server.py, ui/streamlit_app.py. Refactor from app_optimized.py. Keep IndexMetadata, Cache, PerformanceMonitor. Acceptance: Clean package structure, headless pipeline works.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:08:21.580212539-06:00","updated_at":"2025-12-22T22:17:36.854938881-06:00","closed_at":"2025-12-22T22:17:36.854938881-06:00","close_reason":"Completed: nexus package created, providers implemented (Ollama working, cloud stubs ready), RAG pipeline headless, API server functional. Commits: 62f2660, 821b678, f10f16d","dependencies":[{"issue_id":"local-rag-agent-v2b.2","depends_on_id":"local-rag-agent-v2b","type":"parent-child","created_at":"2025-12-22T22:08:21.581421699-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-v2b.3","title":"Phase 2: Provider Interfaces + Routing","description":"Implement LLMProvider, EmbeddingProvider interfaces. Add ollama/anthropic/openai/vertex providers. Router: NEXUS_MODE=local|cloud|hybrid, NEXUS_LLM_PROVIDER, NEXUS_EMBED_PROVIDER. Hybrid: local retrieval, cloud generation with snippets only. Acceptance: All providers work, routing correct.","notes":"Framework ready: Provider interfaces defined, stubs created. Anthropic/OpenAI/Vertex need implementation.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:08:21.655790594-06:00","updated_at":"2025-12-22T22:17:36.942129419-06:00","dependencies":[{"issue_id":"local-rag-agent-v2b.3","depends_on_id":"local-rag-agent-v2b","type":"parent-child","created_at":"2025-12-22T22:08:21.656944941-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-v2b.4","title":"Phase 3: Team Mode + API","description":"Add workspace_id for separate Chroma collections. Run ledger (SQLite/JSONL): run_id, timestamps, model_used, hashes. Headless API: POST /query, POST /index, GET /health. Acceptance: Multi-workspace works, API functional.","notes":"Framework ready: workspace_id implemented, API created. Run ledger and workspace management endpoints TODO.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:08:21.720951339-06:00","updated_at":"2025-12-22T22:17:37.027673578-06:00","dependencies":[{"issue_id":"local-rag-agent-v2b.4","depends_on_id":"local-rag-agent-v2b","type":"parent-child","created_at":"2025-12-22T22:08:21.72180212-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-v2b.5","title":"Phase 4: Tests + CI","description":"Unit tests: provider routing, policy, chunking, citations, hashing. Integration: index sample docs and query. Smoke: import Streamlit, ensure builds. Update GitHub Actions. Acceptance: All tests pass, CI green.","notes":"Framework ready: Smoke tests added. Unit/integration tests and CI updates TODO.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:08:21.783001173-06:00","updated_at":"2025-12-22T22:17:37.122693418-06:00","dependencies":[{"issue_id":"local-rag-agent-v2b.5","depends_on_id":"local-rag-agent-v2b","type":"parent-child","created_at":"2025-12-22T22:08:21.783991913-06:00","created_by":"daemon"}]}
{"id":"local-rag-agent-v2b.6","title":"Phase 5: Documentation + AAR","description":"Create Upgrade Summary (architecture, how to run, env vars, safety model). Create AAR using template 6767-b-AA-TMPL in 000-docs/005-AA-REPT-nexus-hybrid-cloud-team-upgrade.md. Include commits, test results, before/after. Acceptance: Both docs complete, committed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:08:21.858197804-06:00","updated_at":"2025-12-22T22:17:37.215187358-06:00","closed_at":"2025-12-22T22:17:37.215187358-06:00","close_reason":"Completed: Upgrade Summary (005-DR-GUID) and comprehensive AAR (006-AA-REPT) created with full details. Commit: f10f16d","dependencies":[{"issue_id":"local-rag-agent-v2b.6","depends_on_id":"local-rag-agent-v2b","type":"parent-child","created_at":"2025-12-22T22:08:21.859363398-06:00","created_by":"daemon"}]}
